{"ast":null,"code":"import { SigCapture } from \"./capture\";\nimport { SessionControl } from './SigCaptX-SessionControl';\nimport * as i0 from \"@angular/core\";\nexport class VerifySig {\n  constructor() {\n    this.onGetHashForVerification = () => {\n      SigCapture.sigObj.CheckSignedData(SigCapture.hash, this.onCheckSignedData);\n    };\n    this.onCheckSignedData = (hash, status) => {\n      SigCapture.print(\"Verify result: \" + status);\n      if (window.sdkPtr.SignedData.DataGood == status) {\n        SigCapture.print(\"Signed Data OK\");\n      } else {\n        SigCapture.print(\"Signed Data Has Changed\");\n      }\n    };\n  }\n  verify() {\n    console.log(\"Verifying\");\n    VerifySig.verifySignedData();\n  }\n  // This function recalculates the hash value from the first and last names\n  // and checks it against the hash embedded in the signature object\n  static {\n    this.verifySignedData = () => {\n      SigCapture.print(\"Verifying signed data...\");\n      if (null == SigCapture.sigObj) {\n        SessionControl.actionWhenRestarted();\n        return;\n      }\n      SigCapture.hash = null;\n      SigCapture.sigObj.GetIsCaptured(VerifySig.onGetIsCaptured);\n    };\n  }\n  static {\n    this.onGetIsCaptured = (sigObj, isCaptured, status) => {\n      if (window.sdkPtr.ResponseStatus.OK == status) {\n        if (!isCaptured) {\n          SigCapture.print(\"No signature has been captured yet.\");\n          return;\n        }\n        sigObj.GetWho(VerifySig.onGetWho);\n      } else {\n        SigCapture.print(\"Signature GetWho error: \" + status);\n        if (window.sdkPtr.ResponseStatus.INVALID_SESSION == status) {\n          SigCapture.print(\"Session error. Restarting the session.\");\n          SessionControl.actionWhenRestarted(); // See SigCaptX-SessionControl.ts\n        }\n      }\n    };\n  }\n\n  static {\n    this.onGetWho = (sigObjV, who, status) => {\n      if (SigCapture.callbackStatusOK(\"Signature GetWho\", status)) {\n        SigCapture.print(\"  Name:   \" + who);\n        var tz = window.sdkPtr.TimeZone.TimeLocal;\n        SigCapture.sigObj.GetWhen(tz, VerifySig.onGetWhen);\n      }\n    };\n  }\n  static {\n    this.onGetWhen = (sigObjV, when, status) => {\n      if (SigCapture.callbackStatusOK(\"Signature GetWhen\", status)) {\n        SigCapture.print(\"  Date:   \" + when.toString());\n        SigCapture.sigObj.GetWhy(VerifySig.onGetWhy);\n      }\n    };\n  }\n  static {\n    this.onGetWhy = (sigObjV, why, status) => {\n      if (SigCapture.callbackStatusOK(\"Signature GetWhy\", status)) {\n        SigCapture.print(\"  Reason: \" + why);\n      }\n    };\n  }\n  static {\n    this.ɵfac = function VerifySig_Factory(t) {\n      return new (t || VerifySig)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: VerifySig,\n      selectors: [[\"btn-verify\"]],\n      decls: 1,\n      vars: 0,\n      consts: [[\"type\", \"button\", \"value\", \"Verify\", \"title\", \"Checks the signature hash\", 2, \"height\", \"10mm\", \"width\", \"35mm\", 3, \"click\"]],\n      template: function VerifySig_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"input\", 0);\n          i0.ɵɵlistener(\"click\", function VerifySig_Template_input_click_0_listener() {\n            return ctx.verify();\n          });\n          i0.ɵɵelementEnd();\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["SigCapture","SessionControl","VerifySig","constructor","onGetHashForVerification","sigObj","CheckSignedData","hash","onCheckSignedData","status","print","window","sdkPtr","SignedData","DataGood","verify","console","log","verifySignedData","actionWhenRestarted","GetIsCaptured","onGetIsCaptured","isCaptured","ResponseStatus","OK","GetWho","onGetWho","INVALID_SESSION","sigObjV","who","callbackStatusOK","tz","TimeZone","TimeLocal","GetWhen","onGetWhen","when","toString","GetWhy","onGetWhy","why","selectors","decls","vars","consts","template","VerifySig_Template","rf","ctx","i0","ɵɵelementStart","ɵɵlistener","VerifySig_Template_input_click_0_listener","ɵɵelementEnd"],"sources":["C:\\Users\\PROGRAMA2WEB\\Desktop\\wacom-pruebas\\sdk-for-signature-sigcaptx-windows-master\\Samples\\AngularNG\\capture\\src\\app\\verify.ts","C:\\Users\\PROGRAMA2WEB\\Desktop\\wacom-pruebas\\sdk-for-signature-sigcaptx-windows-master\\Samples\\AngularNG\\capture\\src\\app\\btnverify.html"],"sourcesContent":["/* **************************************************************************\r\n  verify.ts\r\n   \r\n  This file contains the source code for verifying the signature by means of\r\n  the hash which was calculated when it was originally captured.\r\n  The \"verify()\" function is activated by the click event on the \r\n  \"Verify\" button on the form as defined in btnverify.html\r\n  \r\n  Copyright (c) 2021 Wacom Co. Ltd. All rights reserved.\r\n  \r\n  v1.0\r\n  \r\n***************************************************************************/\r\nimport { Component } from '@angular/core';\r\nimport { SigCapture } from \"./capture\";\r\nimport { SessionControl } from './SigCaptX-SessionControl';\r\n\r\n@Component({\r\n    selector: 'btn-verify',\r\n    templateUrl: './btnverify.html'\r\n  })\r\n  \r\n  export class VerifySig\r\n  {\r\n    verify()\r\n    {\r\n      console.log(\"Verifying\");\r\n      VerifySig.verifySignedData();\r\n    }\r\n  \r\n   // This function recalculates the hash value from the first and last names\r\n    // and checks it against the hash embedded in the signature object\r\n    static verifySignedData = () =>\r\n    {\r\n      SigCapture.print(\"Verifying signed data...\");\r\n      if(null == SigCapture.sigObj)\r\n      {\r\n        SessionControl.actionWhenRestarted();\r\n        return;\r\n      }\r\n      SigCapture.hash = null;\r\n      SigCapture.sigObj.GetIsCaptured(VerifySig.onGetIsCaptured);\r\n    }\r\n      \r\n    static onGetIsCaptured = (sigObj, isCaptured, status) =>\r\n    {\r\n      if(window.sdkPtr.ResponseStatus.OK == status) \r\n      {\r\n        if(!isCaptured)\r\n        {\r\n          SigCapture.print(\"No signature has been captured yet.\" );\r\n          return;\r\n        }\r\n        sigObj.GetWho(VerifySig.onGetWho);\r\n      }\r\n      else \r\n      {\r\n        SigCapture.print(\"Signature GetWho error: \" + status);\r\n        if(window.sdkPtr.ResponseStatus.INVALID_SESSION == status)\r\n        {\r\n          SigCapture.print(\"Session error. Restarting the session.\");\r\n          SessionControl.actionWhenRestarted();  // See SigCaptX-SessionControl.ts\r\n        }\r\n      }\r\n    }\r\n  \r\n    static onGetWho = (sigObjV, who, status) =>\r\n    {\r\n      if(SigCapture.callbackStatusOK(\"Signature GetWho\", status))\r\n      {\r\n        SigCapture.print(\"  Name:   \" + who);\r\n        var tz = window.sdkPtr.TimeZone.TimeLocal;\r\n        SigCapture.sigObj.GetWhen(tz, VerifySig.onGetWhen);\r\n      } \r\n    }\r\n    \r\n    static onGetWhen = (sigObjV, when, status) =>\r\n    {\r\n      if(SigCapture.callbackStatusOK(\"Signature GetWhen\", status)) \r\n      {\r\n        SigCapture.print(\"  Date:   \" + when.toString() );\r\n        SigCapture.sigObj.GetWhy(VerifySig.onGetWhy);\r\n      } \r\n    }\r\n    \r\n    static onGetWhy = (sigObjV, why, status) =>\r\n    {\r\n      if(SigCapture.callbackStatusOK(\"Signature GetWhy\", status))\r\n      {\r\n        SigCapture.print(\"  Reason: \" + why);\r\n      }\r\n    }  \r\n  \r\n    onGetHashForVerification = () =>\r\n    {\r\n      SigCapture.sigObj.CheckSignedData(SigCapture.hash, this.onCheckSignedData);\r\n    }\r\n      \r\n    onCheckSignedData = (hash, status) =>\r\n    {\r\n      SigCapture.print(\"Verify result: \" + status);\r\n      if(window.sdkPtr.SignedData.DataGood == status)\r\n      {\r\n        SigCapture.print(\"Signed Data OK\");\r\n      }\r\n      else\r\n      {\r\n        SigCapture.print(\"Signed Data Has Changed\");\r\n      }\r\n    }\r\n  }","<input type=\"button\" value=\"Verify\" style=\"height:10mm;width:35mm\" title=\"Checks the signature hash\" (click)=\"verify()\" />"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}